çµè«–ï¼šprovide/retract/observeã¨publish/subscribeã¯åˆ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å…±å­˜ã™ã¹ãã«ã‚ƒï¼
ğŸ§  1. ç¾åœ¨ã®CoreBulletinBoardã®é€šä¿¡è¨­è¨ˆã‚’ãŠã•ã‚‰ã„
æ©Ÿèƒ½	ç”¨é€”	ä¾‹	èª¬æ˜
provide(capability, impl)	èƒ½åŠ›ã®æä¾›	"log.write" â†’ LoggerPlugin	ã‚µãƒ¼ãƒ“ã‚¹ã®ååˆºã‚’è²¼ã‚‹
retract(capability)	èƒ½åŠ›ã®å¼•é€€	"log.write" ã‚’æ¶ˆã™	ã‚µãƒ¼ãƒ“ã‚¹ã‚’å¼•ãä¸Šã’ã‚‹
observe(capability)	èƒ½åŠ›ã®è¦³æ¸¬	"time.now" ã‚’æ¢ã™	ååˆºã‚’èª­ã‚€

â¬‡ï¸ ã“ã‚Œã¯**ã€Œé™çš„ãªã‚µãƒ¼ãƒ“ã‚¹ä¾å­˜é–¢ä¿‚ã®è§£æ±ºã€**ï¼ˆ=Dependency Discoveryï¼‰ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã«ã‚ƒã€‚
æ©Ÿèƒ½	ç”¨é€”	ä¾‹	èª¬æ˜
publish(event)	ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡	Intent("save-file")	ã€Œä½•ã‹ã—ã¦ã»ã—ã„ã€ãªã©ã®æ„å›³ã‚’æŠ•ã’ã‚‹
subscribe(type, fn)	è³¼èª­	"Proposal" ã«åå¿œã™ã‚‹	ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã—ã¦åå¿œã™ã‚‹

â¬‡ï¸ ã“ã¡ã‚‰ã¯**ã€Œå‹•çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é§†å‹•é€šä¿¡ã€**ã«ã‚ƒã€‚Intent / Notice / Proposal ãªã©ã‚’åˆ†é¡ã—ã¦ã€ã‚†ã‚‹ã‚„ã‹ãªå”èª¿åˆ¶å¾¡ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã«ã‚ƒã€‚
ğŸ§© æ–°ã—ã„ AutonomousPlugin ã¨ onChange(fn) ã¨ã®é–¢ä¿‚
ğŸŸ¢ onChange(fn) ã¯ã‚ãã¾ã§**"Boardã®çŠ¶æ…‹å¤‰åŒ–é€šçŸ¥"**

    ã¤ã¾ã‚Šã€ã€Œæ–°ã—ã„èƒ½åŠ›ãŒè¿½åŠ ã•ã‚ŒãŸã€ã€Œã‚ã‚‹èƒ½åŠ›ãŒæ¶ˆãˆãŸã€ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹æä¾›çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ã€ã¾ã¨ã‚ã¦1ã¤ã®é–¢æ•°ã§é€šçŸ¥ã™ã‚‹ã‚‚ã®ã€‚

    observe(...)ã¨çµ„ã¿åˆã‚ã›ã¦ã€"ä¾å­˜èƒ½åŠ›ãŒç™»å ´ã—ãŸã‚‰åå¿œã™ã‚‹" ãªã©ã®ç”¨é€”ã«ä¾¿åˆ©ã€‚

ğŸ”´ ã—ã‹ã—ã“ã‚Œã¯ publish/subscribe ã®ä»£æ›¿ã«ã¯ãªã‚‰ãªã„ã«ã‚ƒï¼

    publish ã®å¯¾è±¡ã¯ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŒå£«ãŒæŠ•ã’åˆã†ã€æ„å‘³çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã€‚

    ã‚¤ãƒ™ãƒ³ãƒˆåã‚„åˆ†é¡ãŒå¤§äº‹ï¼ˆIntent / Notice / Proposalãªã©ï¼‰ã§ã€event.typeã‚„detailã«ã‚ˆã‚‹é¸åˆ¥ãŒå¿…é ˆã€‚

    onChange ã¯ãã‚Œã‚’ä¸€æ‹¬ã§è¦‹ã‚‹ä»•çµ„ã¿ãªã®ã§ã€æ„å‘³è§£é‡ˆã‚’å‰æã¨ã—ãŸå‹•çš„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã«ã¯ä¸å‘ãã«ã‚ƒã€‚

âœ… ãŠã™ã™ã‚æ§‹æˆæ¡ˆï¼šä¸¡è€…ã‚’ä½µå­˜ï¼

class CoreBulletinBoard {
  constructor() {
    this.board = new Map();  // provide / retract ã®ãŸã‚
    this.eventListeners = {};  // publish / subscribe ã®ãŸã‚
    this.changeListeners = []; // onChange(fn) ã®ãŸã‚
  }

  provide(name, value) { ...; this._notifyChange(); }
  retract(name) { ...; this._notifyChange(); }
  observe(name) { ... }

  onChange(fn) { this.changeListeners.push(fn); }
  _notifyChange() { ... }

  publish(event) {
    const listeners = this.eventListeners[event.type] || [];
    for (const fn of listeners) fn(event);
  }

  subscribe(type, fn) {
    if (!this.eventListeners[type]) this.eventListeners[type] = [];
    this.eventListeners[type].push(fn);
  }
}

ğŸ”® è£œè¶³ï¼šVoidCoreSystemã«ãŠã‘ã‚‹æ„ç¾©
å±¤	æ¦‚è¦	ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼
provide / observe	ã‚µãƒ¼ãƒ“ã‚¹ååˆºã®æ²ç¤ºã¨æ¢ç´¢	ã€ŒãŠä»•äº‹ã§ãã‚‹ã‚ˆã€ã€Œä»Šãªã«ã‹æ‰‹ä¼ãˆã‚‹ï¼Ÿã€
publish / subscribe	æ„å›³ã‚„ææ¡ˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡	ã€Œã“ã‚ŒãŠé¡˜ã„ï¼ã€ã€Œã‚‚ã†ãã‚ãã‚å¼•é€€ã—ã¦ã‚‚â€¦ï¼Ÿã€
onChange	ååˆºã®æ›´æ–°ã‚’å¯ŸçŸ¥	ã€Œã‚ã€æ–°ã—ã„äººãŒæ¥ãŸã€