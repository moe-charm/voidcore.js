<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DebugConsoleComponent ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #2d2d30;
            color: #cccccc;
        }
        .test-container {
            background: #252526;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            border: 1px solid #3e3e42;
        }
        .test-button {
            background: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #1177bb;
        }
        .test-button:active {
            background: #005a9e;
        }
        .test-button.secondary {
            background: #3c3c3c;
            border: 1px solid #5a5a5a;
        }
        .test-button.secondary:hover {
            background: #4a4a4a;
        }
        .info-text {
            background: #1e1e1e;
            border: 1px solid #464647;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
        }
        .command-example {
            background: #1e1e1e;
            border: 1px solid #0e639c;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            cursor: pointer;
            transition: all 0.2s;
        }
        .command-example:hover {
            background: #264f78;
            transform: translateX(5px);
        }
        .command-example code {
            color: #9cdcfe;
        }
        h1, h2 {
            color: #e1e1e1;
        }
    </style>
</head>
<body>
    <h1>ğŸ–¥ï¸ DebugConsoleComponent ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-container" style="background: #fff3cd; border: 2px solid #ffc107; color: #000;">
        <h2 style="color: #000;">ğŸ“ ãƒ†ã‚¹ãƒˆæ‰‹é †ï¼ˆè¶…é‡è¦ï¼ï¼‰</h2>
        <ol style="font-size: 16px; line-height: 1.8;">
            <li><strong>Step 1:</strong> ã€ŒDebugConsoleä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            <li><strong>Step 2:</strong> ã€Œè¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ <em>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</em></li>
            <li><strong>Step 3:</strong> ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€Œhelpã€ã¨å…¥åŠ›ã—ã¦Enter â†’ <em>åˆ©ç”¨å¯èƒ½ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§</em></li>
            <li><strong>Step 4:</strong> ä¸‹è¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„</li>
            <li><strong>Step 5:</strong> JavaScriptã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥å®Ÿè¡Œã§ãã¾ã™ï¼</li>
        </ol>
        <p style="margin-top: 15px;">ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆ:</strong> â†‘â†“ã‚­ãƒ¼ã§å±¥æ­´ã€Tabã§è‡ªå‹•è£œå®Œï¼</p>
    </div>
    
    <div class="test-container">
        <h2>ğŸ”§ åŸºæœ¬åˆ¶å¾¡</h2>
        <button class="test-button" id="create-console">DebugConsoleä½œæˆ</button>
        <button class="test-button" id="show-console">è¡¨ç¤º</button>
        <button class="test-button" id="hide-console">éè¡¨ç¤º</button>
        <button class="test-button secondary" id="destroy-console">ç ´æ£„</button>
    </div>
    
    <div class="test-container">
        <h2>ğŸ¯ ã‚³ãƒãƒ³ãƒ‰ã‚µãƒ³ãƒ—ãƒ«ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼ï¼‰</h2>
        <div class="command-example" onclick="copyCommand('help')">
            <code>help</code> - åˆ©ç”¨å¯èƒ½ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
        </div>
        <div class="command-example" onclick="copyCommand('clear')">
            <code>clear</code> - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¯ãƒªã‚¢
        </div>
        <div class="command-example" onclick="copyCommand('history')">
            <code>history</code> - ã‚³ãƒãƒ³ãƒ‰å±¥æ­´è¡¨ç¤º
        </div>
        <div class="command-example" onclick="copyCommand('theme')">
            <code>theme</code> - ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒåˆ‡æ›¿
        </div>
        <div class="command-example" onclick="copyCommand('api')">
            <code>api</code> - CharmFlow APIä¸€è¦§
        </div>
        <div class="command-example" onclick="copyCommand('1 + 1')">
            <code>1 + 1</code> - è¨ˆç®—å®Ÿè¡Œ
        </div>
        <div class="command-example" onclick="copyCommand('console.log(\"Hello CharmFlow!\")')">
            <code>console.log("Hello CharmFlow!")</code> - ãƒ­ã‚°å‡ºåŠ›
        </div>
        <div class="command-example" onclick="copyCommand('new Date().toLocaleString()')">
            <code>new Date().toLocaleString()</code> - ç¾åœ¨æ™‚åˆ»
        </div>
        <div class="command-example" onclick="copyCommand('[...Array(10)].map((_, i) => i * i)')">
            <code>[...Array(10)].map((_, i) => i * i)</code> - é…åˆ—æ“ä½œ
        </div>
        <div class="command-example" onclick="copyCommand('window.navigator.userAgent')">
            <code>window.navigator.userAgent</code> - ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±
        </div>
    </div>
    
    <div class="test-container">
        <h2>ğŸ”¥ é«˜åº¦ãªä½¿ã„æ–¹</h2>
        <div class="command-example" onclick="copyCommand('const fib = n => n <= 1 ? n : fib(n-1) + fib(n-2); fib(10)')">
            <code>const fib = n => n <= 1 ? n : fib(n-1) + fib(n-2); fib(10)</code> - ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—
        </div>
        <div class="command-example" onclick="copyCommand('intent charmflow.test.message {\"data\": \"Hello from console!\"]}')">
            <code>intent charmflow.test.message {"data": "Hello from console!"}</code> - Intenté€ä¿¡
        </div>
        <div class="command-example" onclick="copyCommand('Object.keys(window).filter(k => k.includes(\"CharmFlow\"))')">
            <code>Object.keys(window).filter(k => k.includes("CharmFlow"))</code> - CharmFlowé–¢é€£æ¤œç´¢
        </div>
    </div>
    
    <div class="test-container">
        <h2>ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹</h2>
        <div id="current-status" class="info-text">
            DebugConsoleæœªä½œæˆ
        </div>
    </div>

    <script type="module">
        import { DebugConsoleComponent } from './js/ui-components/DebugConsoleComponent.js'
        
        // ==========================================
        // ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        // ==========================================
        
        let debugConsole = null
        const statusElement = document.getElementById('current-status')
        
        function updateStatus() {
            if (!debugConsole) {
                statusElement.textContent = 'DebugConsoleæœªä½œæˆ'
            } else {
                statusElement.innerHTML = `
DebugConsoleçŠ¶æ…‹:
- ID: ${debugConsole.id}
- è¡¨ç¤º: ${debugConsole.state.isVisible ? 'âœ…' : 'âŒ'}
- ãƒã‚¦ãƒ³ãƒˆ: ${debugConsole.state.isMounted ? 'âœ…' : 'âŒ'}
- ãƒ†ãƒ¼ãƒ: ${debugConsole.currentTheme}
- ã‚³ãƒãƒ³ãƒ‰å±¥æ­´: ${debugConsole.commandHistory.length}ä»¶
- å‡ºåŠ›å±¥æ­´: ${debugConsole.outputHistory.length}ä»¶
                `
            }
        }
        
        // ã‚³ãƒãƒ³ãƒ‰ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        window.copyCommand = function(command) {
            if (debugConsole && debugConsole.inputElement) {
                debugConsole.inputElement.value = command
                debugConsole.inputElement.focus()
                
                // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                const elem = event.currentTarget
                const originalBg = elem.style.background
                elem.style.background = '#0e639c'
                setTimeout(() => {
                    elem.style.background = originalBg
                }, 200)
            } else {
                alert('å…ˆã«DebugConsoleã‚’ä½œæˆãƒ»è¡¨ç¤ºã—ã¦ãã ã•ã„')
            }
        }
        
        // ãƒ¢ãƒƒã‚¯IntentHandler
        const mockIntentHandler = {
            sendIntent: function(type, data) {
                console.log('ğŸ“¤ Intenté€ä¿¡:', type, data)
            },
            
            addIntentListener: function(type, handler) {
                console.log(`ğŸ‘‚ Intent listenerè¿½åŠ : ${type}`)
                return `listener-${type}-${Date.now()}`
            },
            
            removeIntentListener: function(listenerId) {
                console.log(`ğŸ—‘ï¸ Intent listenerå‰Šé™¤: ${listenerId}`)
            }
        }
        
        // ãƒ¢ãƒƒã‚¯PluginNode
        const mockPluginNode = {
            id: 'debug-console-test-node',
            intentHandler: mockIntentHandler
        }
        
        // ==========================================
        // ãƒ†ã‚¹ãƒˆç”¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°è¨­å®š
        // ==========================================
        
        // CharmFlow APIãƒ¢ãƒƒã‚¯
        window.charmFlowCore = {
            version: '1.0.0',
            sendIntent: mockIntentHandler.sendIntent,
            nodes: ['node-1', 'node-2', 'node-3'],
            getStatus: () => ({ running: true, uptime: Date.now() })
        }
        
        window.VoidCore = {
            version: 'nyacore v14.0',
            name: 'nyacore',
            author: 'ã«ã‚ƒãƒ¼'
        }
        
        window.debugLogger = {
            log: (category, level, message, data) => {
                console.log(`[${category}/${level}] ${message}`, data)
            }
        }
        
        // ==========================================
        // åŸºæœ¬åˆ¶å¾¡
        // ==========================================
        
        document.getElementById('create-console').onclick = () => {
            try {
                debugConsole = new DebugConsoleComponent(mockPluginNode, {
                    position: { x: 400, y: 100 },
                    size: { width: 700, height: 500 },
                    welcomeMessage: 'ğŸ–¥ï¸ CharmFlow Debug Console v1.0\nğŸ’¡ Type "help" for available commands\nğŸš€ You can execute any JavaScript code!\n',
                    prompt: 'CharmFlow> ',
                    enableAutocomplete: true,
                    syntaxHighlight: true
                })
                
                // ãƒã‚¦ãƒ³ãƒˆ
                debugConsole.mount()
                
                console.log('âœ… DebugConsoleä½œæˆãƒ»ãƒã‚¦ãƒ³ãƒˆæˆåŠŸ')
                updateStatus()
            } catch (error) {
                console.error('âŒ DebugConsoleä½œæˆå¤±æ•—:', error)
            }
        }
        
        document.getElementById('show-console').onclick = () => {
            if (!debugConsole) {
                alert('å…ˆã«DebugConsoleã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            debugConsole.show()
            console.log('âœ… è¡¨ç¤º')
            updateStatus()
        }
        
        document.getElementById('hide-console').onclick = () => {
            if (!debugConsole) {
                alert('å…ˆã«DebugConsoleã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            debugConsole.hide()
            console.log('âœ… éè¡¨ç¤º')
            updateStatus()
        }
        
        document.getElementById('destroy-console').onclick = () => {
            if (!debugConsole) {
                alert('å…ˆã«DebugConsoleã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            debugConsole.destroy()
            debugConsole = null
            console.log('âœ… ç ´æ£„å®Œäº†')
            updateStatus()
        }
        
        // ==========================================
        // åˆæœŸåŒ–
        // ==========================================
        
        console.log('ğŸš€ DebugConsoleComponent ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–å®Œäº†')
        updateStatus()
        
        // ä½¿ã„æ–¹ãƒ’ãƒ³ãƒˆ
        console.log('%cğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã‚³ãƒãƒ³ãƒ‰ã‚µãƒ³ãƒ—ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™ï¼', 'color: #ffc107; font-size: 14px;')
        
    </script>
</body>
</html>