<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MessageLogPanel ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #2d2d30;
            color: #cccccc;
        }
        .test-container {
            background: #252526;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            border: 1px solid #3e3e42;
        }
        .test-button {
            background: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #1177bb;
        }
        .test-button:active {
            background: #005a9e;
        }
        .test-button.secondary {
            background: #3c3c3c;
            border: 1px solid #5a5a5a;
        }
        .test-button.secondary:hover {
            background: #4a4a4a;
        }
        .test-button.error {
            background: #f14c4c;
        }
        .test-button.error:hover {
            background: #f36969;
        }
        .test-button.warning {
            background: #cca700;
        }
        .test-button.warning:hover {
            background: #ddb71a;
        }
        .info-text {
            background: #1e1e1e;
            border: 1px solid #464647;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
        }
        h1, h2 {
            color: #e1e1e1;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“œ MessageLogPanel ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-container" style="background: #fff3cd; border: 2px solid #ffc107;">
        <h2>ğŸ“ ãƒ†ã‚¹ãƒˆæ‰‹é †ï¼ˆãŠã™ã™ã‚é †ç•ªï¼‰</h2>
        <ol style="font-size: 16px; line-height: 1.8;">
            <li><strong>è‡ªå‹•ã§èµ·å‹•æ¸ˆã¿ï¼</strong> â†’ <em>ç”»é¢å³å´ã«MessageLogPanelãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™</em></li>
            <li><strong>åŸºæœ¬ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡:</strong> ã€ŒMessageé€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ <em>ãƒ­ã‚°ã«è¡¨ç¤ºç¢ºèª</em></li>
            <li><strong>ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šãƒ†ã‚¹ãƒˆ:</strong> ã€ŒErrorãƒ­ã‚°ã€ã€ŒWarningãƒ­ã‚°ã€ãƒœã‚¿ãƒ³ â†’ <em>è‰²åˆ†ã‘è¡¨ç¤ºç¢ºèª</em></li>
            <li><strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½:</strong> ãƒ‘ãƒãƒ«å³ä¸Šã®ã€ŒğŸ”ã€ãƒœã‚¿ãƒ³ â†’ <em>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¼è¡¨ç¤º</em></li>
            <li><strong>ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ:</strong> ã€Œ100ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€£ç¶šé€ä¿¡ã€ â†’ <em>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª</em></li>
            <li><strong>é€£ç¶šé€ä¿¡ãƒ¢ãƒ¼ãƒ‰:</strong> ã€Œé€£ç¶šé€ä¿¡é–‹å§‹/åœæ­¢ã€ â†’ <em>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ç¢ºèª</em></li>
            <li><strong>Intenté€šä¿¡:</strong> ã€Œãƒãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã€ â†’ <em>Intentç›£è¦–ç¢ºèª</em></li>
            <li><strong>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ:</strong> ãƒ‘ãƒãƒ«å³ä¸Šã®ã€ŒğŸ’¾ã€ãƒœã‚¿ãƒ³ â†’ <em>ãƒ­ã‚°ã‚’JSONä¿å­˜</em></li>
        </ol>
        <p style="margin-top: 15px;">ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆ:</strong> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è©³ç´°è¡¨ç¤ºï¼</p>
    </div>
    
    <div class="test-container" style="background: #1e3a5f; border-color: #2d5a8f;">
        <h2>ğŸ“ ãƒ†ã‚¹ãƒˆæ¦‚è¦</h2>
        <p><strong>MessageLogPanel</strong>ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§Intent/Messageã‚’ç›£è¦–ãƒ»è¡¨ç¤ºã™ã‚‹ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢ã§ã™ã€‚</p>
        <ul>
            <li>ğŸ” é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½</li>
            <li>ğŸ“Š ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸çµ±è¨ˆè¡¨ç¤º</li>
            <li>ğŸ’¾ ãƒ­ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½</li>
            <li>ğŸ¨ ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è¡¨ç¤º</li>
            <li>ğŸš€ é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰</li>
        </ul>
    </div>
    
    <div class="test-container">
        <h2>ğŸ”§ åŸºæœ¬åˆ¶å¾¡</h2>
        <button class="test-button" id="create-panel">MessageLogPanelä½œæˆ</button>
        <button class="test-button" id="mount-panel">ãƒã‚¦ãƒ³ãƒˆ</button>
        <button class="test-button" id="show-panel">è¡¨ç¤º</button>
        <button class="test-button" id="hide-panel">éè¡¨ç¤º</button>
        <button class="test-button secondary" id="destroy-panel">ç ´æ£„</button>
    </div>
    
    <div class="test-container">
        <h2>ğŸ“¨ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ†ã‚¹ãƒˆ</h2>
        <div class="test-grid">
            <button class="test-button" id="send-intent">Intenté€ä¿¡</button>
            <button class="test-button" id="send-message">Messageé€ä¿¡</button>
            <button class="test-button error" id="send-error">Errorãƒ­ã‚°</button>
            <button class="test-button warning" id="send-warning">Warningãƒ­ã‚°</button>
            <button class="test-button secondary" id="send-debug">Debugãƒ­ã‚°</button>
            <button class="test-button" id="send-system">Systemãƒ­ã‚°</button>
        </div>
    </div>
    
    <div class="test-container">
        <h2>ğŸ”¥ ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ</h2>
        <button class="test-button" id="send-burst">100ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€£ç¶šé€ä¿¡</button>
        <button class="test-button" id="send-continuous">é€£ç¶šé€ä¿¡é–‹å§‹/åœæ­¢</button>
        <button class="test-button" id="send-mixed">æ··åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</button>
        <button class="test-button" id="send-large">å·¨å¤§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</button>
    </div>
    
    <div class="test-container">
        <h2>ğŸ¯ Intenté€šä¿¡ãƒ†ã‚¹ãƒˆ</h2>
        <button class="test-button" id="simulate-node-event">ãƒãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
        <button class="test-button" id="simulate-connection">æ¥ç¶šã‚¤ãƒ™ãƒ³ãƒˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
        <button class="test-button" id="simulate-property">ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¤‰æ›´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
    </div>
    
    <div class="test-container">
        <h2>ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹</h2>
        <div id="current-status" class="info-text">
            MessageLogPanelæœªä½œæˆ
        </div>
    </div>

    <script type="module">
        import { MessageLogPanel } from './js/ui-components/MessageLogPanel.js'
        import { INTENT_TYPES } from './js/intent-definitions.js'
        
        // ==========================================
        // ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        // ==========================================
        
        let messageLogPanel = null
        let continuousSending = false
        let continuousTimer = null
        let messageCounter = 0
        
        const statusElement = document.getElementById('current-status')
        
        function updateStatus() {
            if (!messageLogPanel) {
                statusElement.textContent = 'MessageLogPanelæœªä½œæˆ'
            } else {
                statusElement.innerHTML = `
MessageLogPanelçŠ¶æ…‹:
- ID: ${messageLogPanel.id}
- è¡¨ç¤º: ${messageLogPanel.state.isVisible ? 'âœ…' : 'âŒ'}
- ãƒã‚¦ãƒ³ãƒˆ: ${messageLogPanel.state.isMounted ? 'âœ…' : 'âŒ'}
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°: ${messageLogPanel.messages.length}
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¸ˆã¿: ${messageLogPanel.filteredMessages.length}
- è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«: ${messageLogPanel.autoScroll ? 'âœ…' : 'âŒ'}
                `
            }
        }
        
        // ãƒ¢ãƒƒã‚¯IntentHandler
        const mockIntentHandler = {
            listeners: new Map(),
            
            sendIntent: function(type, data) {
                console.log('ğŸ“¤ Intenté€ä¿¡:', type, data)
                // è‡ªåˆ†è‡ªèº«ã«ã‚‚é…ä¿¡ï¼ˆãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯ï¼‰
                this.triggerIntent(type, data)
            },
            
            addIntentListener: function(type, handler) {
                if (!this.listeners.has(type)) {
                    this.listeners.set(type, [])
                }
                this.listeners.get(type).push(handler)
                console.log(`ğŸ‘‚ Intent listenerè¿½åŠ : ${type}`)
                return `listener-${type}-${Date.now()}`
            },
            
            removeIntentListener: function(listenerId) {
                console.log(`ğŸ—‘ï¸ Intent listenerå‰Šé™¤: ${listenerId}`)
            },
            
            triggerIntent: function(type, data) {
                // ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°
                this.listeners.forEach((handlers, listenerType) => {
                    if (listenerType === '*' || type.startsWith(listenerType.replace('*', ''))) {
                        handlers.forEach(handler => handler(data, type))
                    }
                })
            }
        }
        
        // ãƒ¢ãƒƒã‚¯PluginNode
        const mockPluginNode = {
            id: 'message-log-test-node',
            intentHandler: mockIntentHandler
        }
        
        // ==========================================
        // åŸºæœ¬åˆ¶å¾¡
        // ==========================================
        
        document.getElementById('create-panel').onclick = () => {
            try {
                messageLogPanel = new MessageLogPanel(mockPluginNode, {
                    position: { x: 800, y: 50 },  // ã‚‚ã£ã¨å³ã«é…ç½®
                    size: { width: 600, height: 500 },
                    maxMessages: 500,
                    autoScroll: true,
                    showTimestamp: true
                })
                
                console.log('âœ… MessageLogPanelä½œæˆæˆåŠŸ')
                updateStatus()
            } catch (error) {
                console.error('âŒ MessageLogPanelä½œæˆå¤±æ•—:', error)
            }
        }
        
        document.getElementById('mount-panel').onclick = () => {
            if (!messageLogPanel) {
                alert('å…ˆã«MessageLogPanelã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            messageLogPanel.mount()
            console.log('âœ… ãƒã‚¦ãƒ³ãƒˆå®Œäº†')
            updateStatus()
        }
        
        document.getElementById('show-panel').onclick = () => {
            if (!messageLogPanel) {
                alert('å…ˆã«MessageLogPanelã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            messageLogPanel.show()
            console.log('âœ… è¡¨ç¤º')
            updateStatus()
        }
        
        document.getElementById('hide-panel').onclick = () => {
            if (!messageLogPanel) {
                alert('å…ˆã«MessageLogPanelã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            messageLogPanel.hide()
            console.log('âœ… éè¡¨ç¤º')
            updateStatus()
        }
        
        document.getElementById('destroy-panel').onclick = () => {
            if (!messageLogPanel) {
                alert('å…ˆã«MessageLogPanelã‚’ä½œæˆã—ã¦ãã ã•ã„')
                return
            }
            
            messageLogPanel.destroy()
            messageLogPanel = null
            console.log('âœ… ç ´æ£„å®Œäº†')
            updateStatus()
        }
        
        // ==========================================
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ†ã‚¹ãƒˆ
        // ==========================================
        
        document.getElementById('send-intent').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.test.intent', {
                action: 'test',
                timestamp: Date.now(),
                data: { value: Math.random() }
            })
        }
        
        document.getElementById('send-message').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'message',
                message: `ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ #${++messageCounter}`,
                source: 'test-button',
                data: { 
                    counter: messageCounter,
                    timestamp: new Date().toISOString()
                }
            })
        }
        
        document.getElementById('send-error').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'error',
                message: `ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${new Error('ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼').message}`,
                source: 'error-test',
                data: {
                    stack: new Error().stack,
                    code: 'TEST_ERROR_001'
                }
            })
        }
        
        document.getElementById('send-warning').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'warning',
                message: 'âš ï¸ è­¦å‘Š: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒé–¾å€¤ã‚’è¶…ãˆã¦ã„ã¾ã™',
                source: 'monitoring',
                data: {
                    memory: Math.floor(Math.random() * 1000) + 500,
                    threshold: 1000
                }
            })
        }
        
        document.getElementById('send-debug').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'debug',
                message: `[DEBUG] å‡¦ç†æ™‚é–“: ${Math.floor(Math.random() * 100)}ms`,
                source: 'performance',
                data: {
                    function: 'processData',
                    args: ['param1', 'param2'],
                    result: 'success'
                }
            })
        }
        
        document.getElementById('send-system').onclick = () => {
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'system',
                message: 'ã‚·ã‚¹ãƒ†ãƒ : æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™»éŒ²ã•ã‚Œã¾ã—ãŸ',
                source: 'plugin-manager',
                data: {
                    pluginId: `plugin-${Date.now()}`,
                    pluginType: 'ui-component',
                    version: '1.0.0'
                }
            })
        }
        
        // ==========================================
        // ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ
        // ==========================================
        
        document.getElementById('send-burst').onclick = () => {
            console.log('ğŸ”¥ 100ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€£ç¶šé€ä¿¡é–‹å§‹')
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const types = ['message', 'error', 'warning', 'debug', 'system']
                    const type = types[Math.floor(Math.random() * types.length)]
                    
                    mockIntentHandler.triggerIntent('charmflow.log.message', {
                        level: type,
                        message: `Burst message ${i + 1}/100 - ${type.toUpperCase()}`,
                        source: 'burst-test',
                        data: {
                            index: i,
                            batchId: Date.now(),
                            random: Math.random()
                        }
                    })
                }, i * 10) // 10msé–“éš”
            }
        }
        
        document.getElementById('send-continuous').onclick = () => {
            if (continuousSending) {
                // åœæ­¢
                clearInterval(continuousTimer)
                continuousSending = false
                document.getElementById('send-continuous').textContent = 'é€£ç¶šé€ä¿¡é–‹å§‹/åœæ­¢'
                console.log('â¹ï¸ é€£ç¶šé€ä¿¡åœæ­¢')
            } else {
                // é–‹å§‹
                continuousSending = true
                document.getElementById('send-continuous').textContent = 'é€£ç¶šé€ä¿¡åœæ­¢'
                console.log('â–¶ï¸ é€£ç¶šé€ä¿¡é–‹å§‹')
                
                continuousTimer = setInterval(() => {
                    const messages = [
                        'ãƒ‡ãƒ¼ã‚¿å‡¦ç†ä¸­...',
                        'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡å®Œäº†',
                        'ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æˆåŠŸ',
                        'ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°',
                        'ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ'
                    ]
                    
                    mockIntentHandler.triggerIntent('charmflow.log.message', {
                        level: Math.random() > 0.8 ? 'warning' : 'message',
                        message: messages[Math.floor(Math.random() * messages.length)],
                        source: 'continuous-test',
                        data: { rate: '200ms' }
                    })
                }, 200)
            }
        }
        
        document.getElementById('send-mixed').onclick = () => {
            // æ§˜ã€…ãªã‚¿ã‚¤ãƒ—ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ··åœ¨ã•ã›ã¦é€ä¿¡
            const mixedMessages = [
                { type: 'intent', intentType: 'ui.button.click', data: { buttonId: 'btn-123' } },
                { type: 'intent', intentType: 'node.connection.create', data: { source: 'node-1', target: 'node-2' } },
                { type: 'message', content: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ', source: 'auth' },
                { type: 'error', content: new Error('æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ'), source: 'network' },
                { type: 'warning', content: 'ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ãŒæ®‹ã‚Šå°‘ãªããªã£ã¦ã„ã¾ã™', source: 'storage' },
                { type: 'debug', content: { function: 'calculate', input: [1, 2, 3], output: 6 }, source: 'math' },
                { type: 'system', content: 'ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒåˆ©ç”¨å¯èƒ½ã§ã™', source: 'updater' }
            ]
            
            mixedMessages.forEach((msg, index) => {
                setTimeout(() => {
                    if (msg.type === 'intent') {
                        mockIntentHandler.triggerIntent(msg.intentType, msg.data)
                    } else {
                        mockIntentHandler.triggerIntent('charmflow.log.message', {
                            level: msg.type,
                            message: msg.content,
                            source: msg.source
                        })
                    }
                }, index * 100)
            })
        }
        
        document.getElementById('send-large').onclick = () => {
            // å·¨å¤§ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            const largeData = {
                id: 'large-data-001',
                timestamp: Date.now(),
                metadata: {
                    version: '1.0.0',
                    author: 'test-system',
                    tags: ['large', 'test', 'performance']
                },
                payload: Array(50).fill(null).map((_, i) => ({
                    index: i,
                    data: {
                        value: Math.random(),
                        nested: {
                            deep: {
                                structure: {
                                    with: {
                                        many: {
                                            levels: `Level ${i}`
                                        }
                                    }
                                }
                            }
                        }
                    },
                    array: Array(10).fill(null).map(() => Math.floor(Math.random() * 100))
                }))
            }
            
            mockIntentHandler.triggerIntent('charmflow.log.message', {
                level: 'message',
                message: 'å·¨å¤§ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
                source: 'large-data-test',
                data: largeData
            })
        }
        
        // ==========================================
        // Intenté€šä¿¡ãƒ†ã‚¹ãƒˆ
        // ==========================================
        
        document.getElementById('simulate-node-event').onclick = () => {
            // ãƒãƒ¼ãƒ‰é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            const nodeEvents = [
                {
                    type: INTENT_TYPES.UI.ELEMENT.CREATE,
                    data: {
                        nodeType: 'button.send',
                        position: { x: 100, y: 200 },
                        pluginId: `plugin-${Date.now()}`
                    }
                },
                {
                    type: INTENT_TYPES.UI.ELEMENT.MOVE,
                    data: {
                        elementId: 'node-123',
                        newPosition: { x: 150, y: 250 },
                        delta: { dx: 50, dy: 50 }
                    }
                },
                {
                    type: INTENT_TYPES.UI.ELEMENT.DELETE,
                    data: {
                        elementId: 'node-456',
                        cascade: true
                    }
                }
            ]
            
            nodeEvents.forEach((event, index) => {
                setTimeout(() => {
                    mockIntentHandler.triggerIntent(event.type, event.data)
                }, index * 200)
            })
        }
        
        document.getElementById('simulate-connection').onclick = () => {
            // æ¥ç¶šã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            mockIntentHandler.triggerIntent(INTENT_TYPES.UI.CONNECTION.START, {
                sourceId: 'node-001',
                cursor: { x: 300, y: 400 }
            })
            
            setTimeout(() => {
                mockIntentHandler.triggerIntent(INTENT_TYPES.UI.CONNECTION.COMPLETE, {
                    sourceId: 'node-001',
                    targetId: 'node-002',
                    connectionType: 'data-flow'
                })
            }, 1000)
        }
        
        document.getElementById('simulate-property').onclick = () => {
            // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            mockIntentHandler.triggerIntent(INTENT_TYPES.UI.PROPERTY_INSPECTOR.NODE_SELECTED, {
                nodeId: 'test-node-789',
                nodeType: 'input.text',
                properties: {
                    placeholder: 'ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›',
                    maxLength: 100,
                    required: true
                }
            })
            
            setTimeout(() => {
                mockIntentHandler.triggerIntent(INTENT_TYPES.UI.PROPERTY_INSPECTOR.UPDATE_NODE_PROPERTY, {
                    nodeId: 'test-node-789',
                    propertyName: 'maxLength',
                    newValue: 200,
                    oldValue: 100
                })
            }, 1500)
        }
        
        // ==========================================
        // åˆæœŸåŒ–
        // ==========================================
        
        console.log('ğŸš€ MessageLogPanel ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–å®Œäº†')
        updateStatus()
        
        // ãƒ‡ãƒ¢ç”¨ï¼šè‡ªå‹•ã§ãƒ‘ãƒãƒ«ä½œæˆãƒ»è¡¨ç¤º
        setTimeout(() => {
            document.getElementById('create-panel').click()
            setTimeout(() => {
                document.getElementById('mount-panel').click()
                setTimeout(() => {
                    document.getElementById('show-panel').click()
                    console.log('ğŸ’¡ MessageLogPanelãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚å„ç¨®ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³ã‚’è©¦ã—ã¦ãã ã•ã„ï¼')
                }, 100)
            }, 100)
        }, 500)
        
    </script>
</body>
</html>