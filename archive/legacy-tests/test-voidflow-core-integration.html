<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª VoidFlow-VoidCoreçµ±åˆãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            background: #1a1a1a;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            margin: 20px;
        }
        .test-panel {
            background: #2a2a2a;
            border: 1px solid #4a90e2;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
        }
        .test-result {
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
        }
        .success { background: rgba(0, 255, 136, 0.2); }
        .error { background: rgba(255, 107, 107, 0.2); }
        .pending { background: rgba(255, 193, 7, 0.2); }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #357abd; }
        #console-output {
            background: #000;
            border: 1px solid #333;
            padding: 10px;
            height: 300px;
            overflow-y: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª VoidFlow-VoidCoreçµ±åˆãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-panel">
        <h2>ğŸ“Š Phase 1 çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
        <div id="phase1-results">
            <div class="test-result pending">ğŸ”„ ãƒ†ã‚¹ãƒˆæº–å‚™ä¸­...</div>
        </div>
        <button onclick="runPhase1Tests()">Phase 1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <button onclick="testBasicIntents()">åŸºæœ¬Intenté€ä¿¡ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testSystemStatus()">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="clearConsole()">ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¯ãƒªã‚¢</button>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ–¥ï¸ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›</h2>
        <div id="console-output"></div>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ”§ ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</h2>
        <p>ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š</p>
        <ul>
            <li><code>window.voidFlowCore.getSystemStatus()</code> - ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª</li>
            <li><code>window.voidFlowCore.sendIntent('voidflow.system.status')</code> - Intenté€ä¿¡ãƒ†ã‚¹ãƒˆ</li>
            <li><code>window.VoidFlowIntents.Shortcuts.systemStatus()</code> - ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆä½¿ç”¨</li>
            <li><code>window.voidFlowIntentBridge.getStatistics()</code> - ãƒ–ãƒªãƒƒã‚¸çµ±è¨ˆ</li>
        </ul>
    </div>

    <script type="module">
        // VoidFlowCoreçµ±åˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        import { VoidFlowCore } from './voidflow/js/voidflow-core.js'
        import { VoidFlowIntentBridge } from './voidflow/js/intent-bridge.js'
        import { INTENT_TYPES, IntentShortcuts } from './voidflow/js/intent-definitions.js'
        
        let testVoidFlowCore = null
        let testIntentBridge = null
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å®šç¾©
        window.runPhase1Tests = runPhase1Tests
        window.testBasicIntents = testBasicIntents
        window.testSystemStatus = testSystemStatus
        window.clearConsole = clearConsole
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            log('ğŸŒŸ VoidFlow-VoidCoreçµ±åˆãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–é–‹å§‹...')
            
            try {
                // VoidFlowCoreåˆæœŸåŒ–
                testVoidFlowCore = new VoidFlowCore({
                    enableDebug: true,
                    enableStats: true
                })
                
                // Intent BridgeåˆæœŸåŒ–
                testIntentBridge = new VoidFlowIntentBridge(testVoidFlowCore)
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§è¨­å®š
                window.testVoidFlowCore = testVoidFlowCore
                window.testIntentBridge = testIntentBridge
                
                log('âœ… ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–å®Œäº†ï¼')
                updateTestResult('phase1-results', 'âœ… åˆæœŸåŒ–å®Œäº†', 'success')
                
            } catch (error) {
                log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`)
                updateTestResult('phase1-results', `âŒ åˆæœŸåŒ–å¤±æ•—: ${error.message}`, 'error')
            }
        })
        
        // Phase 1çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runPhase1Tests() {
            log('ğŸ§ª Phase 1çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹...')
            updateTestResult('phase1-results', 'ğŸ”„ Phase 1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...', 'pending')
            
            const tests = [
                { name: 'VoidFlowCoreåˆæœŸåŒ–ç¢ºèª', test: testVoidFlowCoreInit },
                { name: 'Intent BridgeåˆæœŸåŒ–ç¢ºèª', test: testIntentBridgeInit },
                { name: 'ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹å–å¾—', test: testSystemStatusRetrieval },
                { name: 'åŸºæœ¬Intenté€å—ä¿¡', test: testBasicIntentFlow },
                { name: 'Intentå®šç¾©ç¢ºèª', test: testIntentDefinitions }
            ]
            
            let passed = 0
            let failed = 0
            
            for (const test of tests) {
                try {
                    log(`ğŸ” ${test.name}ãƒ†ã‚¹ãƒˆé–‹å§‹...`)
                    await test.test()
                    log(`âœ… ${test.name}ãƒ†ã‚¹ãƒˆæˆåŠŸ`)
                    passed++
                } catch (error) {
                    log(`âŒ ${test.name}ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
                    failed++
                }
            }
            
            const result = `Phase 1ãƒ†ã‚¹ãƒˆå®Œäº†: ${passed}æˆåŠŸ, ${failed}å¤±æ•—`
            const status = failed === 0 ? 'success' : 'error'
            log(`ğŸ‰ ${result}`)
            updateTestResult('phase1-results', result, status)
        }
        
        // å€‹åˆ¥ãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testVoidFlowCoreInit() {
            if (!testVoidFlowCore || !testVoidFlowCore.isInitialized) {
                throw new Error('VoidFlowCore not initialized')
            }
        }
        
        async function testIntentBridgeInit() {
            if (!testIntentBridge) {
                throw new Error('Intent Bridge not initialized')
            }
            const stats = testIntentBridge.getStatistics()
            if (!stats || !stats.hasOwnProperty('enabled')) {
                throw new Error('Intent Bridge statistics not available')
            }
        }
        
        async function testSystemStatusRetrieval() {
            const status = testVoidFlowCore.getSystemStatus()
            if (!status || !status.initialized) {
                throw new Error('System status retrieval failed')
            }
        }
        
        async function testBasicIntentFlow() {
            const result = await testVoidFlowCore.sendIntent('voidflow.system.status')
            if (!result) {
                throw new Error('Intent sending failed')
            }
        }
        
        async function testIntentDefinitions() {
            if (!window.VoidFlowIntents || !window.VoidFlowIntents.TYPES) {
                throw new Error('Intent definitions not available')
            }
        }
        
        // åŸºæœ¬Intenté€ä¿¡ãƒ†ã‚¹ãƒˆ
        async function testBasicIntents() {
            log('ğŸ“¤ åŸºæœ¬Intenté€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹Intent
                const statusResult = await testVoidFlowCore.sendIntent('voidflow.system.status')
                log(`âœ… ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹Intent: ${JSON.stringify(statusResult)}`)
                
                // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆä½¿ç”¨ãƒ†ã‚¹ãƒˆ
                const shortcutIntent = IntentShortcuts.systemStatus()
                log(`âœ… ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆä½œæˆ: ${JSON.stringify(shortcutIntent)}`)
                
                log('ğŸ‰ åŸºæœ¬Intenté€ä¿¡ãƒ†ã‚¹ãƒˆå®Œäº†ï¼')
                
            } catch (error) {
                log(`âŒ åŸºæœ¬Intenté€ä¿¡ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ
        async function testSystemStatus() {
            log('ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                const status = testVoidFlowCore.getSystemStatus()
                log(`ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹: ${JSON.stringify(status, null, 2)}`)
                
                const features = testVoidFlowCore.getAvailableFeatures()
                log(`ğŸ”§ åˆ©ç”¨å¯èƒ½æ©Ÿèƒ½: ${JSON.stringify(features)}`)
                
                const bridgeStats = testIntentBridge.getStatistics()
                log(`ğŸŒ‰ ãƒ–ãƒªãƒƒã‚¸çµ±è¨ˆ: ${JSON.stringify(bridgeStats, null, 2)}`)
                
                log('âœ… ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ†ã‚¹ãƒˆå®Œäº†ï¼')
                
            } catch (error) {
                log(`âŒ ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function log(message) {
            console.log(message)
            const output = document.getElementById('console-output')
            const timestamp = new Date().toLocaleTimeString()
            output.innerHTML += `<div>[${timestamp}] ${message}</div>`
            output.scrollTop = output.scrollHeight
        }
        
        function updateTestResult(elementId, message, status) {
            const element = document.getElementById(elementId)
            element.innerHTML = `<div class="test-result ${status}">${message}</div>`
        }
        
        function clearConsole() {
            document.getElementById('console-output').innerHTML = ''
            log('ğŸ§¹ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¯ãƒªã‚¢å®Œäº†')
        }
    </script>
</body>
</html>