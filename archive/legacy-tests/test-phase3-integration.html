<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª VoidCore Phase3çµ±åˆãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Consolas', monospace;
            background: #1a1a1a;
            color: #00ff00;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 10px;
        }
        .test-section {
            background: #2a2a2a;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #00ff00;
        }
        .test-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 20px;
            background: #4a4a4a;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn:hover {
            background: #00ff00;
            color: #1a1a1a;
        }
        .btn.danger {
            border-color: #ff4444;
            color: #ff4444;
        }
        .btn.danger:hover {
            background: #ff4444;
            color: #1a1a1a;
        }
        .output {
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: #333;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #555;
        }
        .stat-title {
            color: #00ffff;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .stat-value {
            font-size: 18px;
            color: #ffff00;
        }
        .error {
            color: #ff4444;
        }
        .success {
            color: #44ff44;
        }
        .warning {
            color: #ffaa44;
        }
        .info {
            color: #44aaff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª VoidCore v14.0 Phase3çµ±åˆãƒ†ã‚¹ãƒˆ</h1>
            <p>ğŸ¯ å¤§å·¥äº‹Phase3å®Œäº† - çµ±åˆã‚·ã‚¹ãƒ†ãƒ å‹•ä½œç¢ºèª</p>
            <p>ğŸ“Š UnifiedPluginManager + UnifiedIntentHandler + UnifiedStatsManager</p>
        </div>

        <!-- ã‚³ã‚¢åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸš€ ã‚³ã‚¢åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="btn" onclick="initializeCore()">ã‚³ã‚¢åˆæœŸåŒ–</button>
                <button class="btn" onclick="checkCoreStatus()">ã‚³ã‚¢çŠ¶æ…‹ç¢ºèª</button>
                <button class="btn danger" onclick="clearCore()">ã‚³ã‚¢ã‚¯ãƒªã‚¢</button>
            </div>
            <div id="core-output" class="output"></div>
        </div>

        <!-- UnifiedPluginManager ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ”Œ UnifiedPluginManager ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="btn" onclick="createTestPlugin()">ãƒ†ã‚¹ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆ</button>
                <button class="btn" onclick="listPlugins()">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä¸€è¦§</button>
                <button class="btn" onclick="getPluginStats()">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±è¨ˆ</button>
                <button class="btn danger" onclick="removeAllPlugins()">å…¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‰Šé™¤</button>
            </div>
            <div id="plugin-output" class="output"></div>
        </div>

        <!-- UnifiedIntentHandler ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ¯ UnifiedIntentHandler ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="btn" onclick="sendBootIntent()">system.boot.ready</button>
                <button class="btn" onclick="sendPluginIntent()">system.plugin.create</button>
                <button class="btn" onclick="sendStatsIntent()">system.stats</button>
                <button class="btn" onclick="sendCustomIntent()">ã‚«ã‚¹ã‚¿ãƒ Intent</button>
                <button class="btn" onclick="getIntentStats()">Intentçµ±è¨ˆ</button>
            </div>
            <div id="intent-output" class="output"></div>
        </div>

        <!-- UnifiedStatsManager ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ“Š UnifiedStatsManager ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="btn" onclick="collectAllStats()">å…¨çµ±è¨ˆåé›†</button>
                <button class="btn" onclick="getStatsHistory()">çµ±è¨ˆå±¥æ­´</button>
                <button class="btn" onclick="startAutoCollection()">è‡ªå‹•åé›†é–‹å§‹</button>
                <button class="btn danger" onclick="stopAutoCollection()">è‡ªå‹•åé›†åœæ­¢</button>
            </div>
            <div id="stats-output" class="output"></div>
            <div id="stats-display" class="stats-display"></div>
        </div>

        <!-- ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸŒŸ ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="btn" onclick="runIntegrationTest()">çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
                <button class="btn" onclick="stressTest()">è² è·ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="systemCheck()">ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­</button>
            </div>
            <div id="integration-output" class="output"></div>
        </div>
    </div>

    <script type="module">
        import { VoidCore } from './src/index.js';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let voidCore = null;
        let testPluginCounter = 0;
        let autoCollectionTimer = null;

        // ãƒ­ã‚°å‡ºåŠ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        function logToOutput(elementId, message, type = 'info') {
            const output = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            output.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }

        function clearOutput(elementId) {
            document.getElementById(elementId).innerHTML = '';
        }

        // ã‚³ã‚¢åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ
        window.initializeCore = async function() {
            try {
                clearOutput('core-output');
                logToOutput('core-output', 'ğŸš€ VoidCoreåˆæœŸåŒ–é–‹å§‹...', 'info');
                
                voidCore = new VoidCore();
                await voidCore.initPromise;
                
                logToOutput('core-output', 'âœ… VoidCoreåˆæœŸåŒ–å®Œäº†', 'success');
                logToOutput('core-output', `ğŸ“ Core ID: ${voidCore.coreId}`, 'info');
                logToOutput('core-output', `ğŸ¯ çµ±åˆã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº†:`, 'info');
                logToOutput('core-output', `  - UnifiedPluginManager: ${voidCore.unifiedPluginManager ? 'âœ…' : 'âŒ'}`, 'info');
                logToOutput('core-output', `  - UnifiedIntentHandler: ${voidCore.unifiedIntentHandler ? 'âœ…' : 'âŒ'}`, 'info');
                logToOutput('core-output', `  - UnifiedStatsManager: ${voidCore.unifiedStatsManager ? 'âœ…' : 'âŒ'}`, 'info');
                
            } catch (error) {
                logToOutput('core-output', `âŒ åˆæœŸåŒ–å¤±æ•—: ${error.message}`, 'error');
                console.error('Core initialization failed:', error);
            }
        };

        window.checkCoreStatus = function() {
            if (!voidCore) {
                logToOutput('core-output', 'âš ï¸ ã‚³ã‚¢ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“', 'warning');
                return;
            }
            
            const status = {
                initialized: voidCore.initialized,
                coreId: voidCore.coreId,
                systemStatus: voidCore.systemBootManager?.systemStatus || 'unknown',
                bootComplete: voidCore.systemBootManager?.isBootComplete || false
            };
            
            logToOutput('core-output', `ğŸ“Š ã‚³ã‚¢çŠ¶æ…‹: ${JSON.stringify(status, null, 2)}`, 'info');
        };

        window.clearCore = async function() {
            if (voidCore) {
                await voidCore.clear();
                voidCore = null;
                logToOutput('core-output', 'ğŸ§¹ ã‚³ã‚¢ã‚¯ãƒªã‚¢å®Œäº†', 'success');
            }
        };

        // UnifiedPluginManager ãƒ†ã‚¹ãƒˆ
        window.createTestPlugin = async function() {
            if (!voidCore) {
                logToOutput('plugin-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                testPluginCounter++;
                const testPlugin = {
                    id: `test-plugin-${testPluginCounter}`,
                    type: 'test',
                    receiveMessage: (message) => {
                        logToOutput('plugin-output', `ğŸ“¨ Plugin ${testPlugin.id} received: ${message.type}`, 'info');
                    }
                };
                
                const result = await voidCore.registerPlugin(testPlugin);
                if (result) {
                    logToOutput('plugin-output', `âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆæˆåŠŸ: ${testPlugin.id}`, 'success');
                } else {
                    logToOutput('plugin-output', `âŒ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆå¤±æ•—: ${testPlugin.id}`, 'error');
                }
                
            } catch (error) {
                logToOutput('plugin-output', `âŒ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.listPlugins = function() {
            if (!voidCore) {
                logToOutput('plugin-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const plugins = voidCore.getPlugins();
            logToOutput('plugin-output', `ğŸ“‹ ç™»éŒ²ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ•°: ${plugins.length}`, 'info');
            
            plugins.forEach(plugin => {
                logToOutput('plugin-output', `  - ${plugin.id} (type: ${plugin.type})`, 'info');
            });
        };

        window.getPluginStats = function() {
            if (!voidCore) {
                logToOutput('plugin-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const stats = voidCore.unifiedPluginManager.getStats();
            logToOutput('plugin-output', `ğŸ“Š ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±è¨ˆ:`, 'info');
            logToOutput('plugin-output', `  - ç·ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ•°: ${stats.totalPlugins}`, 'info');
            logToOutput('plugin-output', `  - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–: ${stats.activePlugins}`, 'info');
            logToOutput('plugin-output', `  - å‹åˆ¥åˆ†å¸ƒ: ${JSON.stringify(stats.pluginsByType)}`, 'info');
        };

        window.removeAllPlugins = async function() {
            if (!voidCore) {
                logToOutput('plugin-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const plugins = voidCore.getPlugins();
            let removed = 0;
            
            for (const plugin of plugins) {
                if (voidCore.removePlugin(plugin.id)) {
                    removed++;
                }
            }
            
            logToOutput('plugin-output', `ğŸ—‘ï¸ ${removed}å€‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
        };

        // UnifiedIntentHandler ãƒ†ã‚¹ãƒˆ
        window.sendBootIntent = async function() {
            if (!voidCore) {
                logToOutput('intent-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                const intentMessage = {
                    action: 'system.boot.ready',
                    payload: {
                        timestamp: Date.now(),
                        coreId: voidCore.coreId
                    }
                };
                
                const result = await voidCore.unifiedIntentHandler.processIntent(intentMessage);
                logToOutput('intent-output', `ğŸš€ system.boot.ready çµæœ: ${JSON.stringify(result)}`, 'success');
                
            } catch (error) {
                logToOutput('intent-output', `âŒ Intentå‡¦ç†ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.sendPluginIntent = async function() {
            if (!voidCore) {
                logToOutput('intent-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                const intentMessage = {
                    action: 'system.plugin.create',
                    payload: {
                        type: 'test',
                        config: { name: 'Intentä½œæˆãƒ†ã‚¹ãƒˆ' }
                    }
                };
                
                const result = await voidCore.unifiedIntentHandler.processIntent(intentMessage);
                logToOutput('intent-output', `ğŸ”Œ system.plugin.create çµæœ: ${JSON.stringify(result)}`, 'success');
                
            } catch (error) {
                logToOutput('intent-output', `âŒ Intentå‡¦ç†ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.sendStatsIntent = async function() {
            if (!voidCore) {
                logToOutput('intent-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                const intentMessage = {
                    action: 'system.stats',
                    payload: {}
                };
                
                const result = await voidCore.unifiedIntentHandler.processIntent(intentMessage);
                logToOutput('intent-output', `ğŸ“Š system.stats çµæœ: ${JSON.stringify(result, null, 2)}`, 'success');
                
            } catch (error) {
                logToOutput('intent-output', `âŒ Intentå‡¦ç†ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.sendCustomIntent = async function() {
            if (!voidCore) {
                logToOutput('intent-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                const intentMessage = {
                    action: 'custom.test.action',
                    payload: {
                        message: 'ã‚«ã‚¹ã‚¿ãƒ Intentãƒ†ã‚¹ãƒˆ',
                        timestamp: Date.now()
                    }
                };
                
                const result = await voidCore.unifiedIntentHandler.processIntent(intentMessage);
                logToOutput('intent-output', `ğŸ¨ custom.test.action çµæœ: ${JSON.stringify(result)}`, 'success');
                
            } catch (error) {
                logToOutput('intent-output', `âŒ Intentå‡¦ç†ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.getIntentStats = function() {
            if (!voidCore) {
                logToOutput('intent-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const stats = voidCore.unifiedIntentHandler.getStats();
            logToOutput('intent-output', `ğŸ“Š Intentçµ±è¨ˆ:`, 'info');
            logToOutput('intent-output', `  - ç·Intentæ•°: ${stats.totalIntents}`, 'info');
            logToOutput('intent-output', `  - æˆåŠŸ: ${stats.successfulIntents}`, 'info');
            logToOutput('intent-output', `  - å¤±æ•—: ${stats.failedIntents}`, 'info');
            logToOutput('intent-output', `  - å¾…æ©Ÿä¸­: ${stats.pendingIntents}`, 'info');
        };

        // UnifiedStatsManager ãƒ†ã‚¹ãƒˆ
        window.collectAllStats = async function() {
            if (!voidCore) {
                logToOutput('stats-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            try {
                const stats = await voidCore.unifiedStatsManager.collectAllStats();
                logToOutput('stats-output', `ğŸ“Š çµ±è¨ˆåé›†å®Œäº†: ${new Date(stats.timestamp).toLocaleTimeString()}`, 'success');
                
                // çµ±è¨ˆè¡¨ç¤ºæ›´æ–°
                updateStatsDisplay(stats);
                
            } catch (error) {
                logToOutput('stats-output', `âŒ çµ±è¨ˆåé›†ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };

        window.getStatsHistory = function() {
            if (!voidCore) {
                logToOutput('stats-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const history = voidCore.unifiedStatsManager.getStatsHistory(5);
            logToOutput('stats-output', `ğŸ“‹ çµ±è¨ˆå±¥æ­´ (æœ€æ–°5ä»¶):`, 'info');
            
            history.forEach((entry, index) => {
                const time = new Date(entry.timestamp).toLocaleTimeString();
                logToOutput('stats-output', `  ${index + 1}. ${time} - ${entry.summary?.overallHealth || 'unknown'}`, 'info');
            });
        };

        window.startAutoCollection = function() {
            if (!voidCore) {
                logToOutput('stats-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            voidCore.unifiedStatsManager.startAutoCollection();
            logToOutput('stats-output', 'ğŸ”„ è‡ªå‹•çµ±è¨ˆåé›†é–‹å§‹', 'success');
        };

        window.stopAutoCollection = function() {
            if (!voidCore) {
                logToOutput('stats-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            voidCore.unifiedStatsManager.stopAutoCollection();
            logToOutput('stats-output', 'â¸ï¸ è‡ªå‹•çµ±è¨ˆåé›†åœæ­¢', 'success');
        };

        function updateStatsDisplay(stats) {
            const display = document.getElementById('stats-display');
            display.innerHTML = '';
            
            // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
            if (stats.error) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">çµ±è¨ˆã‚¨ãƒ©ãƒ¼</div>
                    <div class="stat-value error">${stats.error}</div>
                `;
                display.appendChild(card);
                return;
            }
            
            if (!stats.categories) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ãªã—</div>
                    <div class="stat-value warning">ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</div>
                `;
                display.appendChild(card);
                return;
            }
            
            // åŸºæœ¬çµ±è¨ˆ
            if (stats.categories.core) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">ã‚³ã‚¢çµ±è¨ˆ</div>
                    <div class="stat-value">ID: ${stats.categories.core.coreId}</div>
                    <div class="stat-value">åˆæœŸåŒ–: ${stats.categories.core.initialized ? 'âœ…' : 'âŒ'}</div>
                    <div class="stat-value">å®Ÿè¡Œæ™‚é–“: ${stats.categories.core.runtime || 0}ms</div>
                `;
                display.appendChild(card);
            }
            
            // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±è¨ˆ
            if (stats.categories.plugin) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±è¨ˆ</div>
                    <div class="stat-value">ç·æ•°: ${stats.categories.plugin.plugins || 0}</div>
                    <div class="stat-value">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–: ${stats.categories.plugin.healthyPlugins || 0}</div>
                    <div class="stat-value">ä¸å¥å…¨: ${stats.categories.plugin.unhealthyPlugins || 0}</div>
                `;
                display.appendChild(card);
            }
            
            // Intentçµ±è¨ˆ
            if (stats.categories.intent) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">Intentçµ±è¨ˆ</div>
                    <div class="stat-value">ç·æ•°: ${stats.categories.intent.totalIntents || 0}</div>
                    <div class="stat-value">æˆåŠŸç‡: ${((stats.categories.intent.successRate || 0) * 100).toFixed(1)}%</div>
                    <div class="stat-value">å¹³å‡å‡¦ç†æ™‚é–“: ${(stats.categories.intent.averageProcessingTime || 0).toFixed(2)}ms</div>
                `;
                display.appendChild(card);
            }
            
            // ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆ
            if (stats.categories.system) {
                const card = document.createElement('div');
                card.className = 'stat-card';
                card.innerHTML = `
                    <div class="stat-title">ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆ</div>
                    <div class="stat-value">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${stats.categories.system.platform || 'unknown'}</div>
                    <div class="stat-value">ç¨¼åƒæ™‚é–“: ${(stats.categories.system.uptime || 0).toFixed(2)}s</div>
                    <div class="stat-value">ãƒ¡ãƒ¢ãƒª: ${stats.categories.system.memory ? (stats.categories.system.memory.rss / 1024 / 1024).toFixed(2) : '0'}MB</div>
                `;
                display.appendChild(card);
            }
        }

        // ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ
        window.runIntegrationTest = async function() {
            if (!voidCore) {
                logToOutput('integration-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            logToOutput('integration-output', 'ğŸŒŸ çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');
            
            try {
                // 1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆ
                const plugin = {
                    id: 'integration-test-plugin',
                    type: 'integration',
                    receiveMessage: (msg) => console.log('Integration plugin received:', msg)
                };
                
                await voidCore.registerPlugin(plugin);
                logToOutput('integration-output', 'âœ… ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆå®Œäº†', 'success');
                
                // 2. Intenté€ä¿¡
                const intentResult = await voidCore.unifiedIntentHandler.processIntent({
                    action: 'system.plugin.list',
                    payload: {}
                });
                logToOutput('integration-output', 'âœ… ã‚¹ãƒ†ãƒƒãƒ—2: Intentå‡¦ç†å®Œäº†', 'success');
                
                // 3. çµ±è¨ˆåé›†
                const stats = await voidCore.unifiedStatsManager.collectAllStats();
                logToOutput('integration-output', 'âœ… ã‚¹ãƒ†ãƒƒãƒ—3: çµ±è¨ˆåé›†å®Œäº†', 'success');
                
                // 4. çµæœç¢ºèª
                const pluginCount = voidCore.getPlugins().length;
                const intentStats = voidCore.unifiedIntentHandler.getStats();
                
                logToOutput('integration-output', `ğŸ“Š çµ±åˆãƒ†ã‚¹ãƒˆçµæœ:`, 'info');
                logToOutput('integration-output', `  - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ•°: ${pluginCount}`, 'info');
                logToOutput('integration-output', `  - Intentå‡¦ç†æ•°: ${intentStats.totalIntents}`, 'info');
                
                // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
                if (stats.error) {
                    logToOutput('integration-output', `  - çµ±è¨ˆã‚¨ãƒ©ãƒ¼: ${stats.error}`, 'error');
                } else if (stats.categories) {
                    logToOutput('integration-output', `  - çµ±è¨ˆã‚«ãƒ†ã‚´ãƒª: ${Object.keys(stats.categories).length}`, 'info');
                    logToOutput('integration-output', `  - å…¨ä½“å¥å…¨æ€§: ${stats.summary?.overallHealth || 'unknown'}`, 'info');
                } else {
                    logToOutput('integration-output', `  - çµ±è¨ˆãƒ‡ãƒ¼ã‚¿: å–å¾—å¤±æ•—`, 'warning');
                }
                
                logToOutput('integration-output', 'ğŸ‰ çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº† - ã™ã¹ã¦æ­£å¸¸å‹•ä½œï¼', 'success');
                
            } catch (error) {
                logToOutput('integration-output', `âŒ çµ±åˆãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`, 'error');
            }
        };

        window.stressTest = async function() {
            if (!voidCore) {
                logToOutput('integration-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            logToOutput('integration-output', 'ğŸ”¥ è² è·ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');
            
            const startTime = Date.now();
            let successCount = 0;
            let errorCount = 0;
            
            // 100å€‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆ
            for (let i = 0; i < 100; i++) {
                try {
                    const plugin = {
                        id: `stress-test-${i}`,
                        type: 'stress',
                        receiveMessage: () => {}
                    };
                    
                    await voidCore.registerPlugin(plugin);
                    successCount++;
                } catch (error) {
                    errorCount++;
                }
            }
            
            // 50å€‹ã®Intenté€ä¿¡
            for (let i = 0; i < 50; i++) {
                try {
                    await voidCore.unifiedIntentHandler.processIntent({
                        action: 'system.plugin.list',
                        payload: {}
                    });
                    successCount++;
                } catch (error) {
                    errorCount++;
                }
            }
            
            const endTime = Date.now();
            const duration = endTime - startTime;
            
            logToOutput('integration-output', `ğŸ è² è·ãƒ†ã‚¹ãƒˆå®Œäº†:`, 'info');
            logToOutput('integration-output', `  - å®Ÿè¡Œæ™‚é–“: ${duration}ms`, 'info');
            logToOutput('integration-output', `  - æˆåŠŸ: ${successCount}`, 'success');
            logToOutput('integration-output', `  - å¤±æ•—: ${errorCount}`, errorCount > 0 ? 'error' : 'success');
            logToOutput('integration-output', `  - æˆåŠŸç‡: ${((successCount / (successCount + errorCount)) * 100).toFixed(1)}%`, 'info');
        };

        window.systemCheck = async function() {
            if (!voidCore) {
                logToOutput('integration-output', 'âš ï¸ å…ˆã«ã‚³ã‚¢ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            logToOutput('integration-output', 'ğŸ” ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­é–‹å§‹...', 'info');
            
            // è¨ºæ–­é …ç›®
            const checks = [
                {
                    name: 'ã‚³ã‚¢åˆæœŸåŒ–çŠ¶æ…‹',
                    check: () => voidCore.initialized,
                    expected: true
                },
                {
                    name: 'UnifiedPluginManager',
                    check: () => !!voidCore.unifiedPluginManager,
                    expected: true
                },
                {
                    name: 'UnifiedIntentHandler',
                    check: () => !!voidCore.unifiedIntentHandler,
                    expected: true
                },
                {
                    name: 'UnifiedStatsManager',
                    check: () => !!voidCore.unifiedStatsManager,
                    expected: true
                },
                {
                    name: 'SystemBootManager',
                    check: () => !!voidCore.systemBootManager,
                    expected: true
                },
                {
                    name: 'BootSequenceå®Œäº†',
                    check: () => voidCore.systemBootManager?.isBootComplete,
                    expected: true
                }
            ];
            
            let passCount = 0;
            let failCount = 0;
            
            for (const check of checks) {
                try {
                    const result = check.check();
                    if (result === check.expected) {
                        logToOutput('integration-output', `âœ… ${check.name}: æ­£å¸¸`, 'success');
                        passCount++;
                    } else {
                        logToOutput('integration-output', `âŒ ${check.name}: ç•°å¸¸ (æœŸå¾…: ${check.expected}, å®Ÿéš›: ${result})`, 'error');
                        failCount++;
                    }
                } catch (error) {
                    logToOutput('integration-output', `âŒ ${check.name}: ã‚¨ãƒ©ãƒ¼ - ${error.message}`, 'error');
                    failCount++;
                }
            }
            
            const totalChecks = passCount + failCount;
            const successRate = (passCount / totalChecks) * 100;
            
            logToOutput('integration-output', `ğŸ“Š è¨ºæ–­çµæœ:`, 'info');
            logToOutput('integration-output', `  - åˆæ ¼: ${passCount}/${totalChecks}`, 'info');
            logToOutput('integration-output', `  - æˆåŠŸç‡: ${successRate.toFixed(1)}%`, successRate === 100 ? 'success' : 'warning');
            
            if (successRate === 100) {
                logToOutput('integration-output', 'ğŸ‰ ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­å®Œäº† - ã™ã¹ã¦æ­£å¸¸ï¼', 'success');
            } else {
                logToOutput('integration-output', 'âš ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­å®Œäº† - ä¸€éƒ¨ç•°å¸¸ã‚ã‚Š', 'warning');
            }
        };

        // åˆæœŸåŒ–æ™‚ã«è‡ªå‹•å®Ÿè¡Œ
        window.addEventListener('load', function() {
            logToOutput('core-output', 'ğŸŒŸ VoidCore Phase3çµ±åˆãƒ†ã‚¹ãƒˆæº–å‚™å®Œäº†', 'success');
            logToOutput('core-output', 'ğŸ‘† ã€Œã‚³ã‚¢åˆæœŸåŒ–ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„', 'info');
        });
    </script>
</body>
</html>