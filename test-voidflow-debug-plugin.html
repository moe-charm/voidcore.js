<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ› VoidFlowDebugPlugin - VoidCoreãƒ«ãƒ¼ãƒ«æº–æ‹ ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            background: #1a1a1a;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            margin: 20px;
        }
        .test-panel {
            background: #2a2a2a;
            border: 1px solid #4a90e2;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
        }
        .test-result {
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
        }
        .success { background: rgba(0, 255, 136, 0.2); }
        .error { background: rgba(255, 107, 107, 0.2); }
        .pending { background: rgba(255, 193, 7, 0.2); }
        .plugin { background: rgba(138, 43, 226, 0.2); }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #357abd; }
        button:disabled { background: #666; cursor: not-allowed; }
        button.plugin-btn { background: #8a2be2; }
        button.plugin-btn:hover { background: #7a1dd2; }
        #console-output {
            background: #000;
            border: 1px solid #333;
            padding: 10px;
            height: 400px;
            overflow-y: auto;
            font-size: 12px;
        }
        .plugin-log {
            background: rgba(138, 43, 226, 0.1);
            border-left: 3px solid #8a2be2;
            padding: 5px;
            margin: 2px 0;
        }
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        .stat-item {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .plugin-feature {
            background: #2a2a2a;
            border: 1px solid #8a2be2;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
        .feature-test {
            background: #333;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #8a2be2;
        }
        .code-example {
            background: #000;
            border: 1px solid #444;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ› VoidFlowDebugPlugin - VoidCoreãƒ«ãƒ¼ãƒ«æº–æ‹ ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-panel">
        <h2>ğŸ§© VoidCoreãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
        <div id="plugin-results">
            <div class="test-result pending">ğŸ”„ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æº–å‚™ä¸­...</div>
        </div>
        <button onclick="runPluginTests()" class="plugin-btn">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <button onclick="testPluginLifecycle()" class="plugin-btn">ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testMessageProcessing()">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testIntentHandling()">Intentå‡¦ç†ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="loadVoidFlowPage()" class="plugin-btn">VoidFlowãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿</button>
        <button onclick="clearConsole()">ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¯ãƒªã‚¢</button>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ” ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
        <div class="plugin-feature">
            <h3>ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½</h3>
            <div class="feature-test">
                <button onclick="testTraceFeature()" class="plugin-btn">ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="enableTrace()">ãƒˆãƒ¬ãƒ¼ã‚¹æœ‰åŠ¹åŒ–</button>
                <button onclick="disableTrace()">ãƒˆãƒ¬ãƒ¼ã‚¹ç„¡åŠ¹åŒ–</button>
                <button onclick="getTraceHistory()">å±¥æ­´ç¢ºèª</button>
            </div>
        </div>
        
        <div class="plugin-feature">
            <h3>çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½</h3>
            <div class="feature-test">
                <button onclick="testStateFeature()" class="plugin-btn">çŠ¶æ…‹ç®¡ç†ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="captureState()">çŠ¶æ…‹ã‚­ãƒ£ãƒ—ãƒãƒ£</button>
                <button onclick="dumpState()">çŠ¶æ…‹ãƒ€ãƒ³ãƒ—</button>
                <button onclick="getStateHistory()">çŠ¶æ…‹å±¥æ­´ç¢ºèª</button>
            </div>
        </div>
        
        <div class="plugin-feature">
            <h3>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ©Ÿèƒ½</h3>
            <div class="feature-test">
                <button onclick="testPerformanceFeature()" class="plugin-btn">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="runBenchmark()">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ</button>
                <button onclick="measureCustomFunction()">ã‚«ã‚¹ã‚¿ãƒ è¨ˆæ¸¬</button>
                <button onclick="getPerformanceStats()">çµ±è¨ˆç¢ºèª</button>
            </div>
        </div>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ“Š ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±è¨ˆæƒ…å ±</h2>
        <div class="stats-panel" id="stats-panel">
            <div class="stat-item">
                <div>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ID</div>
                <div id="plugin-id">æœªåˆæœŸåŒ–</div>
            </div>
            <div class="stat-item">
                <div>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
                <div id="plugin-status">æœªåˆæœŸåŒ–</div>
            </div>
            <div class="stat-item">
                <div>å‡¦ç†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°</div>
                <div id="message-count">0</div>
            </div>
            <div class="stat-item">
                <div>å‡¦ç†Intentæ•°</div>
                <div id="intent-count">0</div>
            </div>
        </div>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ–¥ï¸ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›</h2>
        <div id="console-output"></div>
    </div>
    
    <div class="test-panel">
        <h2>ğŸ”§ VoidCoreãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</h2>
        <p>ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š</p>
        
        <div class="code-example">
<strong>ğŸ§© ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åˆ¶å¾¡:</strong>
testDebugPlugin.sendMessage({ type: 'debug.trace.enable', payload: { patterns: ['*'] } })
testDebugPlugin.handleIntent({ intent: 'voidflow.debug.stats.get', payload: {} })
testDebugPlugin.onActivated()
testDebugPlugin.onDeactivated()

<strong>ğŸ” ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒãƒƒã‚°é–¢æ•°:</strong>
voidflowDebug.trace('voidflow.*')
voidflowDebug.stats()
voidflowDebug.benchmark('test', 100)
debugVoidFlow.getStats()

<strong>ğŸ“Š ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æƒ…å ±:</strong>
testDebugPlugin.getSystemStats()
testDebugPlugin.getPluginInfo()
testDebugPlugin.getPerformanceStats()

<strong>ğŸ¯ ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼:</strong>
testPlugin.runAllTests()
testPlugin.getTestResults()
        </div>
    </div>

    <script type="module">
        // VoidFlowDebugPluginçµ±åˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        import { VoidFlowDebugPlugin } from './voidflow/js/voidflow-debug-plugin.js'
        
        let testDebugPlugin = null
        let messageCount = 0
        let intentCount = 0
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å®šç¾©
        window.runPluginTests = runPluginTests
        window.testPluginLifecycle = testPluginLifecycle
        window.testMessageProcessing = testMessageProcessing
        window.testIntentHandling = testIntentHandling
        window.testTraceFeature = testTraceFeature
        window.testStateFeature = testStateFeature
        window.testPerformanceFeature = testPerformanceFeature
        window.enableTrace = enableTrace
        window.disableTrace = disableTrace
        window.getTraceHistory = getTraceHistory
        window.captureState = captureState
        window.dumpState = dumpState
        window.getStateHistory = getStateHistory
        window.runBenchmark = runBenchmark
        window.measureCustomFunction = measureCustomFunction
        window.getPerformanceStats = getPerformanceStats
        window.loadVoidFlowPage = loadVoidFlowPage
        window.clearConsole = clearConsole
        
        // ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        window.testPlugin = {
            runAllTests: runAllPluginTests,
            getTestResults: getTestResults,
            getPluginInfo: getPluginInfo
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            log('ğŸŒŸ VoidFlowDebugPlugin ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–é–‹å§‹...')
            
            try {
                // VoidFlowDebugPluginåˆæœŸåŒ–
                testDebugPlugin = new VoidFlowDebugPlugin({
                    options: {
                        enableDebug: true,
                        enableStats: true,
                        enableTrace: false
                    }
                })
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§è¨­å®š
                window.testDebugPlugin = testDebugPlugin
                
                // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æœ‰åŠ¹åŒ–
                await testDebugPlugin.onActivated()
                
                log('âœ… VoidFlowDebugPlugin åˆæœŸåŒ–å®Œäº†ï¼')
                updateTestResult('plugin-results', 'âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åˆæœŸåŒ–å®Œäº†', 'success')
                
                // çµ±è¨ˆæƒ…å ±æ›´æ–°
                updateStats()
                
            } catch (error) {
                log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`)
                updateTestResult('plugin-results', `âŒ åˆæœŸåŒ–å¤±æ•—: ${error.message}`, 'error')
                updateStats()
            }
        })
        
        // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runPluginTests() {
            log('ğŸ§© VoidCoreãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹...')
            updateTestResult('plugin-results', 'ğŸ”„ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...', 'pending')
            
            const tests = [
                { name: 'IPluginç¶™æ‰¿ç¢ºèª', test: testIPluginInheritance },
                { name: 'ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«', test: testPluginLifecycleInternal },
                { name: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†', test: testMessageProcessingInternal },
                { name: 'Intentå‡¦ç†', test: testIntentHandlingInternal },
                { name: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ä½œæˆ', test: testGlobalFunctionCreation },
                { name: 'ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½çµ±åˆ', test: testDebugFeatureIntegration }
            ]
            
            let passed = 0
            let failed = 0
            
            for (const test of tests) {
                try {
                    log(`ğŸ” ${test.name}ãƒ†ã‚¹ãƒˆé–‹å§‹...`)
                    await test.test()
                    log(`âœ… ${test.name}ãƒ†ã‚¹ãƒˆæˆåŠŸ`)
                    passed++
                } catch (error) {
                    log(`âŒ ${test.name}ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
                    failed++
                }
            }
            
            const result = `ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†: ${passed}æˆåŠŸ, ${failed}å¤±æ•—`
            const status = failed === 0 ? 'success' : 'error'
            log(`ğŸ‰ ${result}`)
            updateTestResult('plugin-results', result, status)
            updateStats()
        }
        
        // å€‹åˆ¥ãƒ†ã‚¹ãƒˆé–¢æ•°
        async function testIPluginInheritance() {
            if (!(testDebugPlugin instanceof VoidFlowDebugPlugin)) {
                throw new Error('VoidFlowDebugPlugin instance creation failed')
            }
            
            // IPluginã®å¿…é ˆãƒ¡ã‚½ãƒƒãƒ‰ç¢ºèª
            const requiredMethods = ['onActivated', 'onDeactivated', 'processMessage', 'handleIntent']
            for (const method of requiredMethods) {
                if (typeof testDebugPlugin[method] !== 'function') {
                    throw new Error(`Required method ${method} not found`)
                }
            }
            
            // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª
            if (!testDebugPlugin.id || !testDebugPlugin.type) {
                throw new Error('Required plugin properties not found')
            }
        }
        
        async function testPluginLifecycleInternal() {
            // æœ‰åŠ¹åŒ–ãƒ†ã‚¹ãƒˆ
            const activateResult = await testDebugPlugin.onActivated()
            if (!activateResult || activateResult.status !== 'activated') {
                throw new Error('Plugin activation failed')
            }
            
            // ç„¡åŠ¹åŒ–ãƒ†ã‚¹ãƒˆ
            const deactivateResult = await testDebugPlugin.onDeactivated()
            if (!deactivateResult || deactivateResult.status !== 'deactivated') {
                throw new Error('Plugin deactivation failed')
            }
            
            // å†æœ‰åŠ¹åŒ–
            await testDebugPlugin.onActivated()
        }
        
        async function testMessageProcessingInternal() {
            const testMessage = {
                type: 'debug.stats.get',
                payload: { test: true }
            }
            
            const result = await testDebugPlugin.processMessage(testMessage)
            messageCount++
            
            if (!result) {
                throw new Error('Message processing failed')
            }
        }
        
        async function testIntentHandlingInternal() {
            const testIntent = {
                intent: 'voidflow.debug.stats.get',
                payload: { test: true }
            }
            
            const result = await testDebugPlugin.handleIntent(testIntent)
            intentCount++
            
            if (!result || result.status !== 'success') {
                throw new Error('Intent handling failed')
            }
        }
        
        async function testGlobalFunctionCreation() {
            if (!window.voidflowDebug) {
                throw new Error('voidflowDebug global function not created')
            }
            
            if (!window.debugVoidFlow) {
                throw new Error('debugVoidFlow global function not created')
            }
            
            // åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
            const stats = window.voidflowDebug.stats()
            if (!stats) {
                throw new Error('Global debug function test failed')
            }
        }
        
        async function testDebugFeatureIntegration() {
            // ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
            const traceResult = testDebugPlugin.enableTrace(['test.*'], 'basic')
            if (!traceResult.includes('Tracing enabled')) {
                throw new Error('Trace feature test failed')
            }
            
            // çŠ¶æ…‹ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ†ã‚¹ãƒˆ
            const stateResult = testDebugPlugin.captureState()
            if (!stateResult || !stateResult.timestamp) {
                throw new Error('State capture test failed')
            }
            
            // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            const perfResult = testDebugPlugin.measurePerformance('test-function', () => { return 42 })
            if (!perfResult || typeof perfResult.duration !== 'number') {
                throw new Error('Performance measurement test failed')
            }
        }
        
        // ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ†ã‚¹ãƒˆ
        async function testPluginLifecycle() {
            log('ğŸ”„ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                // ç„¡åŠ¹åŒ–
                await testDebugPlugin.onDeactivated()
                log('âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç„¡åŠ¹åŒ–æˆåŠŸ')
                
                // æœ‰åŠ¹åŒ–
                await testDebugPlugin.onActivated()
                log('âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æœ‰åŠ¹åŒ–æˆåŠŸ')
                
                updateStats()
                
            } catch (error) {
                log(`âŒ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ†ã‚¹ãƒˆ
        async function testMessageProcessing() {
            log('ğŸ“¨ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            const messages = [
                { type: 'debug.trace.enable', payload: { patterns: ['*'] } },
                { type: 'debug.state.capture', payload: {} },
                { type: 'debug.stats.get', payload: {} }
            ]
            
            for (const message of messages) {
                try {
                    const result = await testDebugPlugin.processMessage(message)
                    logPlugin(`âœ… ${message.type} å‡¦ç†æˆåŠŸ`, result)
                    messageCount++
                } catch (error) {
                    log(`âŒ ${message.type} å‡¦ç†å¤±æ•—: ${error.message}`)
                }
            }
            
            updateStats()
        }
        
        // Intentå‡¦ç†ãƒ†ã‚¹ãƒˆ
        async function testIntentHandling() {
            log('ğŸ¯ Intentå‡¦ç†ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            const intents = [
                { intent: 'voidflow.debug.stats.get', payload: {} },
                { intent: 'voidflow.debug.state.capture', payload: {} },
                { intent: 'voidflow.debug.trace.start', payload: { patterns: ['test.*'] } }
            ]
            
            for (const intentMessage of intents) {
                try {
                    const result = await testDebugPlugin.handleIntent(intentMessage)
                    logPlugin(`âœ… ${intentMessage.intent} å‡¦ç†æˆåŠŸ`, result)
                    intentCount++
                } catch (error) {
                    log(`âŒ ${intentMessage.intent} å‡¦ç†å¤±æ•—: ${error.message}`)
                }
            }
            
            updateStats()
        }
        
        // æ©Ÿèƒ½åˆ¥ãƒ†ã‚¹ãƒˆ
        async function testTraceFeature() {
            log('ğŸ” ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                // ãƒˆãƒ¬ãƒ¼ã‚¹æœ‰åŠ¹åŒ–
                const enableResult = testDebugPlugin.enableTrace(['voidflow.*'], 'detailed')
                log(`ğŸ“ ãƒˆãƒ¬ãƒ¼ã‚¹æœ‰åŠ¹åŒ–: ${enableResult}`)
                
                // ãƒˆãƒ¬ãƒ¼ã‚¹ç„¡åŠ¹åŒ–
                const disableResult = testDebugPlugin.disableTrace()
                log(`ğŸ“ ãƒˆãƒ¬ãƒ¼ã‚¹ç„¡åŠ¹åŒ–: ${disableResult}`)
                
            } catch (error) {
                log(`âŒ ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        async function testStateFeature() {
            log('ğŸ“Š çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                // çŠ¶æ…‹ã‚­ãƒ£ãƒ—ãƒãƒ£
                const state = testDebugPlugin.captureState()
                logPlugin('ğŸ“¸ çŠ¶æ…‹ã‚­ãƒ£ãƒ—ãƒãƒ£å®Œäº†', state)
                
                // çŠ¶æ…‹ãƒ€ãƒ³ãƒ—
                testDebugPlugin.dumpState('json')
                
            } catch (error) {
                log(`âŒ çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        async function testPerformanceFeature() {
            log('âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆé–‹å§‹...')
            
            try {
                // ã‚«ã‚¹ã‚¿ãƒ é–¢æ•°è¨ˆæ¸¬
                const perfResult = testDebugPlugin.measurePerformance('test-calc', () => {
                    let sum = 0
                    for (let i = 0; i < 1000; i++) sum += i
                    return sum
                })
                logPlugin('âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬å®Œäº†', perfResult)
                
                // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
                const benchResult = await testDebugPlugin.runBenchmark('system-state', 10)
                logPlugin('ğŸƒ ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Œäº†', benchResult)
                
            } catch (error) {
                log(`âŒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}`)
            }
        }
        
        // å€‹åˆ¥æ©Ÿèƒ½åˆ¶å¾¡
        function enableTrace() {
            const result = testDebugPlugin.enableTrace(['*'], 'detailed')
            log(`ğŸ” ${result}`)
        }
        
        function disableTrace() {
            const result = testDebugPlugin.disableTrace()
            log(`ğŸ” ${result}`)
        }
        
        function getTraceHistory() {
            const history = testDebugPlugin.getTraceHistory()
            logPlugin('ğŸ“Š ãƒˆãƒ¬ãƒ¼ã‚¹å±¥æ­´', history)
        }
        
        function captureState() {
            const state = testDebugPlugin.captureState()
            logPlugin('ğŸ“¸ çŠ¶æ…‹ã‚­ãƒ£ãƒ—ãƒãƒ£', state)
        }
        
        function dumpState() {
            testDebugPlugin.dumpState('table')
        }
        
        function getStateHistory() {
            const history = testDebugPlugin.getStateHistory()
            logPlugin('ğŸ“Š çŠ¶æ…‹å±¥æ­´', history)
        }
        
        function runBenchmark() {
            testDebugPlugin.runBenchmark('ui-update', 50)
        }
        
        function measureCustomFunction() {
            const result = testDebugPlugin.measurePerformance('custom-test', () => {
                return Math.random() * 1000
            })
            logPlugin('âš¡ ã‚«ã‚¹ã‚¿ãƒ è¨ˆæ¸¬', result)
        }
        
        function getPerformanceStats() {
            const stats = testDebugPlugin.getPerformanceStats()
            logPlugin('ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ', stats)
        }
        
        function loadVoidFlowPage() {
            log('ğŸ”— VoidFlowãƒšãƒ¼ã‚¸ã«ç§»å‹•ä¸­...')
            window.location.href = '/voidflow/index-voidcore.html'
        }
        
        // ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        async function runAllPluginTests() {
            await runPluginTests()
            await testTraceFeature()
            await testStateFeature()
            await testPerformanceFeature()
        }
        
        function getTestResults() {
            return {
                messageCount,
                intentCount,
                pluginInfo: getPluginInfo(),
                stats: testDebugPlugin.getSystemStats()
            }
        }
        
        function getPluginInfo() {
            return {
                id: testDebugPlugin.id,
                type: testDebugPlugin.type,
                displayName: testDebugPlugin.displayName,
                status: testDebugPlugin.status,
                uptime: Date.now() - testDebugPlugin.createdAt
            }
        }
        
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function log(message) {
            console.log(message)
            const output = document.getElementById('console-output')
            const timestamp = new Date().toLocaleTimeString()
            output.innerHTML += `<div>[${timestamp}] ${message}</div>`
            output.scrollTop = output.scrollHeight
        }
        
        function logPlugin(message, data) {
            const output = document.getElementById('console-output')
            const timestamp = new Date().toLocaleTimeString()
            output.innerHTML += `<div class="plugin-log">[${timestamp}] ${message}<br><pre>${JSON.stringify(data, null, 2)}</pre></div>`
            output.scrollTop = output.scrollHeight
        }
        
        function updateTestResult(elementId, message, status) {
            const element = document.getElementById(elementId)
            element.innerHTML = `<div class="test-result ${status}">${message}</div>`
        }
        
        function updateStats() {
            if (testDebugPlugin) {
                document.getElementById('plugin-id').textContent = testDebugPlugin.id
                document.getElementById('plugin-status').textContent = testDebugPlugin.status
            }
            document.getElementById('message-count').textContent = messageCount
            document.getElementById('intent-count').textContent = intentCount
        }
        
        function clearConsole() {
            document.getElementById('console-output').innerHTML = ''
            log('ğŸ§¹ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¯ãƒªã‚¢å®Œäº†')
        }
    </script>
</body>
</html>