VoidCore.js æ¦‚è¦è¦ç´„
ğŸ¯ ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

    ã‚³ã‚¢ã¯æ²ç¤ºæ¿ï¼šMapã§å®Ÿè£…ã€‚provide() / observe() / retract() ã®ã¿æä¾›

    ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯è‡ªå¾‹å­˜åœ¨ï¼šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦è‡ªå·±æº–å‚™ã—ã€æ²ç¤ºæ¿ã«è‡ªåˆ†ã§ç™»éŒ²ãƒ»è¦³æ¸¬ãƒ»å‰Šé™¤

    é€šä¿¡ã¯ä¾å­˜ã—ãªã„ï¼šCustomEvent, RxJS, Svelte Store ãªã©ã‚’ä½¿ãˆã°ååˆ†

ğŸ§± ã‚³ã‚¢æ§‹é€ ï¼ˆcore.jsï¼‰

export class CoreBulletinBoard {
  constructor() {
    this.board = new Map();
  }

  provide(name, service) {
    this.board.set(name, service);
  }

  observe(name) {
    return this.board.get(name);
  }

  retract(name) {
    this.board.delete(name);
  }
}

export const board = new CoreBulletinBoard();

ğŸ¤– ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ§‹é€ ï¼ˆä¾‹ï¼šloggerPlugin.jsï¼‰

import { board } from './core.js';

class LoggerPlugin {
  constructor() {
    this.prepare();
    board.provide('Logger', this);
  }

  prepare() {
    console.log('[Logger] Ready.');
  }

  log(msg) {
    console.log(`[LOG]: ${msg}`);
  }

  shutdown() {
    board.retract('Logger');
  }
}

new LoggerPlugin();

âœï¸ åˆ©ç”¨å´ï¼ˆä¾‹ï¼štextEditorPlugin.jsï¼‰

import { board } from './core.js';

class TextEditorPlugin {
  constructor() {
    this.prepare();
    board.provide('TextEditor', this);
  }

  prepare() {
    const logger = board.observe('Logger');
    if (logger) logger.log('[TextEditor] Booted!');
  }

  shutdown() {
    board.retract('TextEditor');
  }
}

new TextEditorPlugin();

ğŸŒ èµ·å‹•HTMLï¼ˆindex.htmlï¼‰

<script type="module" src="loggerPlugin.js"></script>
<script type="module" src="textEditorPlugin.js"></script>

âœ… ç‰¹å¾´

    è‡ªå¾‹çš„ï¼šinit/shutdownã‚‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è‡ªèº«ã®è²¬ä»»

    ä¸­å¤®åˆ¶å¾¡ãªã—ï¼šã‚³ã‚¢ã¯å˜ãªã‚‹æ²ç¤ºæ¿

    ã©ã“ã§ã‚‚å‹•ãï¼šãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§å‹•ãï¼

ã“ã®å½¢ã§ä¸¦è¡Œé–‹ç™ºã™ã‚Œã°ã€C++ã¨JavaScriptã§å…±é€šã®å“²å­¦ã‚’æŒã¤ã‚·ã‚¹ãƒ†ãƒ ãŒã§ãã‚ãŒã‚‹ã«ã‚ƒâœ¨
æº–å‚™ã§ããŸã‚‰ã€GitHub Pages ã§ãƒ‡ãƒ¢å…¬é–‹ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆã«ã‚ƒï¼