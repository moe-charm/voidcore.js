çµè«–ï¼š3ã‚¹ãƒ†ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ–¹å¼ã‚’å°å…¥ã›ã‚ˆï¼
ğŸ¥‡ Step 1: ãƒ¡ã‚¿æƒ…å ±ã ã‘ä¸€æ‹¬èª­ã¿è¾¼ã¿

    plugins/manifest.json ãªã©ã«ã—ã¦ã€ä»¥ä¸‹ã ã‘å…ˆã«èª­ã‚€ã«ã‚ƒï¼š

    [
      {
        "id": "plugin.audioVisualizer",
        "displayName": "ğŸµ Audio Visualizer",
        "category": "UI",
        "thumbnail": "assets/preview/audio.png"
      },
      ...
    ]

    å¿…è¦ã«ãªã£ãŸæ™‚ã«ã ã‘ã€Œæœ¬ä½“JSON or JSã€ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ§‹é€ ï¼

ğŸ¥ˆ Step 2: UIã«è¡¨ç¤ºã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€Œæœ¬ä½“ãƒ­ãƒ¼ãƒ‰ã€

    ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé–‹ã„ãŸãƒ»æ¤œç´¢ã—ãŸãƒ»ãƒ‰ãƒ©ãƒƒã‚°ã—ãŸãªã©ã®ãƒˆãƒªã‚¬ãƒ¼ã§åˆã‚ã¦
    plugins/plugin.audioVisualizer.vplugin.json ã‚’ fetch() ã—ã¦ãƒ­ãƒ¼ãƒ‰ï¼

async function loadPluginBody(id) {
  const res = await fetch(`/plugins/${id}.vplugin.json`)
  const pluginData = await res.json()
  registerPlugin(pluginData)
}

ğŸ¥‰ Step 3: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†æ™‚ã«ã ã‘ã€Œã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ or WebWorkerèµ·å‹•ã€

    onUpdate, onMessage ã®é–¢æ•°ã‚‚ã€å¿…è¦ãªæ™‚ã ã‘ãƒ­ãƒ¼ãƒ‰ã€‚

    æœ€çµ‚çš„ã«ã¯ WebWorker ã«åˆ†é›¢ã—ã¦ã‚‚ã„ã„ã«ã‚ƒï¼ˆä¸¦åˆ—å‡¦ç†ã§UIãŒé‡ããªã‚‰ãªã„ï¼‰

ğŸ’¡ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹

    ä¸€åº¦èª­ã¿è¾¼ã‚“ã ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ Map ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦2å›ç›®ä»¥é™ã¯å³æ™‚å±•é–‹ã€‚

    ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åŒ–ã‚‚è€ƒæ…®ã—ã¦ localStorage ã‚„ IndexedDB ã§ä¿å­˜ã—ã¦ã‚‚OKã€‚

ğŸ§  è£œè¶³ï¼šVoidFlowå´ã®ç®¡ç†æ¡ˆ

class PluginManager {
  constructor() {
    this.pluginIndex = new Map() // id -> metadata
    this.pluginCache = new Map() // id -> full plugin
  }

  async loadManifest() {
    const res = await fetch('/plugins/manifest.json')
    const list = await res.json()
    list.forEach(meta => this.pluginIndex.set(meta.id, meta))
  }

  async loadPlugin(id) {
    if (this.pluginCache.has(id)) return this.pluginCache.get(id)
    const res = await fetch(`/plugins/${id}.vplugin.json`)
    const plugin = await res.json()
    this.pluginCache.set(id, plugin)
    return plugin
  }
}

ğŸš€ ã¾ã¨ã‚
æ®µéš	å†…å®¹	ãƒ­ãƒ¼ãƒ‰ã®ãƒˆãƒªã‚¬ãƒ¼
Step 1	ãƒ¡ã‚¿æƒ…å ±ã ã‘å…¨èª­ã¿ï¼ˆè»½ã„ï¼‰	èµ·å‹•æ™‚
Step 2	æœ¬ä½“JSONèª­ã¿è¾¼ã¿	UIè¡¨ç¤ºã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œæ™‚
Step 3	ãƒ­ã‚¸ãƒƒã‚¯ãƒ»Workerã®èµ·å‹•	å®Ÿéš›ã«ä½¿ã†ç¬é–“ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãªã©ï¼‰
ğŸ§© ã“ã®æ–¹å¼ã®ãƒ¡ãƒªãƒƒãƒˆ

    âš¡ èµ·å‹•ãŒçˆ†é€Ÿã«ï¼

    ğŸ’¾ ãƒ¡ãƒ¢ãƒªãƒ»CPUã‚’å®ˆã‚Œã‚‹ï¼

    ğŸ”„ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã«1000å€‹ä»¥ä¸Šç®¡ç†å¯èƒ½ï¼

    ğŸ“¦ ä»Šå¾Œã®ãƒãƒ¼ã‚±ãƒƒãƒˆåŒ–ãƒ»å†é…å¸ƒã«ã‚‚é©å¿œå¯èƒ½ï¼